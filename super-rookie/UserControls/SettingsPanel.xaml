<UserControl x:Class="super_rookie.UserControls.SettingsPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:super_rookie.UserControls">

    <UserControl.Resources>
        <!-- Default Template -->
        <DataTemplate x:Key="DefaultSettingsTemplate">
            <StackPanel Margin="20" HorizontalAlignment="Center">
                <TextBlock Text="No item selected" 
                           FontSize="12" 
                           Foreground="#7F8C8D" 
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </DataTemplate>

        <!-- Tank Settings Template -->
        <DataTemplate x:Key="TankSettingsTemplate">
            <local:TankSettingsPanel DataContext="{Binding}" 
                                     MixingUnitVM="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
        </DataTemplate>

        <!-- Valve Settings Template -->
        <DataTemplate x:Key="ValveSettingsTemplate">
            <local:ValveSettingsPanel DataContext="{Binding}"
                                     MixingUnitVM="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
        </DataTemplate>

        <!-- Heater Settings Template -->
        <DataTemplate x:Key="HeaterSettingsTemplate">
            <local:HeaterSettingsPanel DataContext="{Binding}"
                                     MixingUnitVM="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
        </DataTemplate>

        <!-- Mixer Settings Template -->
        <DataTemplate x:Key="MixerSettingsTemplate">
            <local:MixerSettingsPanel DataContext="{Binding}"
                                     MixingUnitVM="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
        </DataTemplate>

        <!-- Pump Settings Template -->
        <DataTemplate x:Key="PumpSettingsTemplate">
            <local:PumpSettingsPanel DataContext="{Binding}"
                                    MixingUnitVM="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
        </DataTemplate>

        <!-- Level Sensor Settings Template -->
        <DataTemplate x:Key="LevelSensorSettingsTemplate">
            <local:LevelSensorSettingsPanel DataContext="{Binding}"
                                           MixingUnitVM="{Binding DataContext, RelativeSource={RelativeSource AncestorType=UserControl}}"/>
        </DataTemplate>

        <!-- Template Selector -->
        <local:ModuleSettingsTemplateSelector x:Key="ModuleTemplateSelector"
                                             TankTemplate="{StaticResource TankSettingsTemplate}"
                                             ValveTemplate="{StaticResource ValveSettingsTemplate}"
                                             HeaterTemplate="{StaticResource HeaterSettingsTemplate}"
                                             MixerTemplate="{StaticResource MixerSettingsTemplate}"
                                             PumpTemplate="{StaticResource PumpSettingsTemplate}"
                                             LevelSensorTemplate="{StaticResource LevelSensorSettingsTemplate}"
                                             DefaultTemplate="{StaticResource DefaultSettingsTemplate}"/>
    </UserControl.Resources>

    <Border Background="White" 
            BorderBrush="#BDC3C7" 
            BorderThickness="1" 
            CornerRadius="5"
            Margin="10,0,0,0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- 헤더 -->
                <RowDefinition Height="*"/>
                <!-- 설정 콘텐츠 -->
            </Grid.RowDefinitions>

            <!-- 설정 패널 헤더 -->
            <Border Grid.Row="0" Background="#ECF0F1" Padding="10,8">
                <TextBlock Text="Settings" 
                           FontSize="14" 
                           FontWeight="Bold" 
                           Foreground="#2C3E50"/>
            </Border>

            <!-- 설정 콘텐츠 -->
            <ContentControl Grid.Row="1" 
                            Content="{Binding SelectedModule}"
                            ContentTemplateSelector="{StaticResource ModuleTemplateSelector}"/>
        </Grid>
    </Border>
</UserControl>